<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="default.css">
        <link rel="icon" 
            type="image/png" 
            href="https://ubikom.cc/favicon.png">
    </head>
    <body>
        <h1>Ubikom Project</h1>
        <p><i>Secure and Private Email Without Accounts or Domains</i></p>
        <p>
            Ubikom is free, open-source email framework based on the concept of <a href="https://sovrin.org/faq/what-is-self-sovereign-identity/">Self-Sovereign Identity.</a>
            You own your identity (which, in this case, means your private key), and all the outgoing and incoming messages are encrypted 
            and signed by default.
        </p>
        <p>
            Ubikom uses Bitcoin-style Elliptic Curve Cryptography. In fact, Ubikom keys are identical to Bitcoin keys.
        </p>
        <p>
            It doesn't spy on you, because you don't give away any private information, the only thing known
            to others is your public key and your identifier (basically your email address). Your messages cannot be decrypted by 
            anyone but you.
        </p>
        <p>
            To send and receive messages, you use any standard email client, 
            such as <a href="https://www.thunderbird.net/en-US/">Mozilla Thunderbird</a>, iOS Mail, <a href="https://bluemail.me"> BlueMail</a>, or any other 
            client that supports SMTP and POP3. Encryption and decryption is done on the fly by the proxy 
            (which you can also run yourself, if you like).
        </p>
        <p>
            Eventually, the public key registry will be decentralized so that it's not controlled by any single party.
        </p>
        <p>
            If you want to give it a try, you can start on this page by choosing your email identifier below.
        </p>
        <form id="name-form">
            <input type="text" id="identifier" placeholder="identifier (i.e. bob)"/>
            <button name="submit" id="nextButton">Next</button>
            <i><p id="status" style="margin: 0"></p></i>
        </form>
        <h2>Why?</h2>
        <p><a href="/intro.html">Let's Reinvent Email</a></p>
        <h2>How?</h2>
        <p><a href="/tech-description.html">Technical Description</a></p>
        <h2>Find Out More</h2>
        <p>Currently in beta testing. Things are not stable just yet, act accordingly.</p>
        <p><a href="/configure-client.html">How to configure email client</a></p>
        <p>GitHub repo: <a href="https://github.com/regnull/ubikom">github.com/regnull/ubikom</a> (developers are welcome to contribute).</p>
        <p>Contact: <a href="mailto: lgx@ubikom.cc">lgx@ubikom.cc</a></p>
        <p>On twitter: <a href="https://twitter.com/UbikomProject">@UbikomProject</a> (yes, using Twitter does strike us as ironic).</p>
        <script>
            let nextEnabled = false;
            function submit(event) {
                event.preventDefault();
                if (!nextEnabled) {
                    return;
                }
                sessionStorage.setItem('identifier', document.getElementById('identifier').value);
                location.href = 'password.html';
            }

            function nameChanged() {
                let idInput = document.getElementById("identifier");

                if(idInput.value.length < 3) {
                    document.getElementById("status").innerHTML = "name is too short";
                    document.getElementById("status").style.color = '#FF0000';
                    document.getElementById('nextButton').style.opacity = 0.6;
                    nextEnabled = false;
                    return;
                }

                let req = new XMLHttpRequest();
                req.onload = function () {
                    if (req.status == 200) {
                        res = JSON.parse(req.responseText);
                        if(res.available) {
                            document.getElementById("status").innerHTML = "available!";
                            document.getElementById("status").style.color = '#3ADF00';
                            document.getElementById('nextButton').style.opacity = 1.0;
                            nextEnabled = true;
                        } else {
                            document.getElementById("status").innerHTML = "not available :(";
                            document.getElementById("status").style.color = '#FF0000';
                            document.getElementById('nextButton').style.opacity = 0.6;
                            nextEnabled = false;
                        }
                    } else {
                        document.getElementById("status").innerHTML = "invalid name";
                        document.getElementById("status").style.color = '#FF0000';
                        document.getElementById('nextButton').style.opacity = 0.6;
                        nextEnabled = false;
                    }
                }
                req.open('GET', 'https://alpha.ubikom.cc:8088/lookupName?name=' + encodeURIComponent(idInput.value), true);
                req.send(null);
            }
            let idInput = document.getElementById("identifier");
            idInput.onkeyup = nameChanged;
            document.getElementById('nextButton').style.opacity = 0.6;
            document.getElementById('nextButton').onclick = submit;
        </script>
    </body>
</html>
